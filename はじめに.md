**Geminiがなんかいってた**

ご要望のPWAアプリのコードを、HTML、CSS、JavaScript を中心に生成します。初学者の方が管理しやすいように、各ファイルの役割を明確にし、コメントを多めに記述します。
ただし、Service Worker を使ったプッシュ通知の実装は、セキュリティ要件やブラウザの実装の複雑さから、初学者向けに簡易的なコードで完全に動作させるのは困難です。ここでは、プッシュ通知のトリガーと表示の基本的な部分（許可の取得、通知の表示）のみを実装し、定期的なバックグラウンド同期や複雑なスケジューリングは省略します。 実際のPWAの通知は、サーバーサイドとの連携やより高度な実装が必要になります。
また、ドラッグ＆ドロップによる並び替えも、シンプルなHTML/CSS/JSで実装するにはそこそこのコード量になるため、基本的な要素のみを配置し、機能としての実装は別途行う形とします。
ファイル構成は以下の通りです。

.
├── index.html
├── style.css
├── script.js
├── service-worker.js
├── manifest.json
└── icons/ (アイコン画像フォルダ、ここでは省略)


**逆算してXMLプロンプトをかいて！って指示したらこれが返ってきた。**


<system_role>
  You are an expert full-stack developer specializing in Progressive Web Apps (PWA). 
  Your goal is to generate a complete, high-fidelity, single-page application for managing trash collection schedules in Japan.
  The output must include index.html, style.css, script.js, service-worker.js, and manifest.json.
  Focus on clean code, robust logic, and a user-friendly "Modern Japanese Pastel" design.
</system_role>

<app_specification>
  <meta_info>
    <app_name>ゴミ捨てカレンダーPWA</app_name>
    <description>Multiple location support, specialized trash collection management app.</description>
    <theme_color>#6a9cff</theme_color>
    <design_style>Clean, Minimalist, Pastel Colors, Rounded Corners</design_style>
  </meta_info>

  <data_structure>
    <storage_key>trash_app_data</storage_key>
    <schema>
      {
        "settings": {
          "currentLocationId": "home",
          "darkMode": boolean,
          "lastNotificationTime": "07:00"
        },
        "locations": {
          "[locationId]": {
            "id": string,
            "name": string, // e.g., "自宅", "実家"
            "trashRules": [
              {
                "id": string,
                "name": string, // e.g., "可燃ごみ"
                "color": string, // hex code
                "active": boolean,
                "cycleType": "weekly" | "nth_weekday" | "interval" | "specific",
                "weeklyDays": [1-7], // 1=Mon, 7=Sun
                "nthWeek": string, // e.g., "第1・3"
                "nthWeekday": number,
                "intervalStart": "YYYY-MM-DD",
                "intervalPeriod": number,
                "specificDates": ["YYYY-MM-DD"],
                "holidaySkip": boolean,
                "notify": boolean,
                "notifyTime": "HH:MM"
              }
            ],
            "specialCollections": {
              "bulkWaste": [{ "id": string, "date": "YYYY-MM-DD", "item": string, "amount": number, "count": number }],
              "reusable": [{ "id": string, "date": "YYYY-MM-DD", "item": string, "time": "HH:MM" }]
            }
          }
        }
      }
    </schema>
  </data_structure>

  <features>
    <feature id="Calendar">
      <description>Monthly view. Displays trash icons (colored dots) and special collections (text icons) for each date.</description>
      <requirements>
        - Header with location switcher (dropdown).
        - Legend area below the calendar grid showing colored dots and names for active rules.
        - Special collection icons must have distinct styles:
          - Bulk Waste: Purple background, circle.
          - Reusable: Carrot Orange (#e67e22) background, rounded square (border-radius: 4px). THIS STYLE MUST BE ENFORCED VIA INLINE STYLES IN JS TO AVOID CSS CACHING ISSUES.
      </requirements>
    </feature>

    <feature id="SpecialCollection">
      <description>Manage one-off collections (Bulk Waste & Reusable).</description>
      <requirements>
        - Tabbed interface for "Bulk Waste" and "Reusable".
        - Input forms with appropriate fields (Date, Item, Amount, Count, Time).
        - "Reusable" time picker should use dropdowns for Hour (06-20) and Minute (10-min intervals) for UX.
        - List view below forms showing registered items.
        - Edit and Delete functionality for list items. (Edit populates the form and changes button to "Update").
      </requirements>
    </feature>

    <feature id="Rules">
      <description>Manage recurring trash rules for the current location.</description>
      <requirements>
        - List of rule cards.
        - Collapsible details for each card.
        - Logic to handle complex Japanese cycles (e.g., 1st & 3rd Tuesday, Interval).
        - "Add Rule" and "Delete Rule" buttons.
      </requirements>
    </feature>

    <feature id="Settings">
      <description>System-wide settings and data management.</description>
      <requirements>
        - Location Management: Add/Rename/Delete locations (Default "Home" cannot be deleted).
        - Dark Mode toggle.
        - Data Import/Export (JSON file).
        - Warning message about browser storage volatility.
        - "Danger Zone": A hidden/toggleable section containing a "Reset All Data" button.
      </requirements>
    </feature>
  </features>

  <technical_requirements>
    <pwa>
      - Valid manifest.json.
      - Service Worker for offline caching (index.html, styles, scripts, icons).
    </pwa>
    <coding_guidelines>
      - Single Page Application (SPA) logic using vanilla JS (screen switching via visibility).
      - Inline SVG for icons (or Material Icons font link).
      - Strict separation of concerns, but use inline styles in JS for critical UI elements (like the Reusable icon shape/color) to prevent caching conflicts.
      - Ensure 'locations' logic permeates all functions (calendar rendering, rule saving, etc. must use current location data).
    </coding_guidelines>
  </technical_requirements>
</app_specification>

<instruction>
  Generate the full source code for the files: index.html, style.css, script.js, service-worker.js, and manifest.json.
  Ensure all features described above, especially the Multi-Location support and the specific styling for Reusable items, are implemented correctly.
</instruction>

全部英語でわからん！